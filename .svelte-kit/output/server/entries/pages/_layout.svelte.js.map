{"version":3,"file":"_layout.svelte.js","sources":["../../../../../src/lib/components/Header.svelte","../../../../../src/lib/components/Footer.svelte","../../../../../src/lib/utils/CartValidator.ts","../../../../../src/lib/repositories/CartRepository.ts","../../../../../src/lib/services/PriceService.ts","../../../../../src/lib/stores/cart.ts","../../../../../src/lib/utils/GeocodingUtils.ts","../../../../../src/lib/stores/orderInfo.ts","../../../../../src/lib/services/CheckoutService.ts","../../../../../src/lib/components/Cart/Cart.svelte","../../../../../src/routes/+layout.svelte"],"sourcesContent":["<script>\n    import { base } from '$app/paths';\n    import { page } from '$app/stores';\n\n    /** @type {HTMLDivElement} */\n    let scrollIndicator;\n    let isMobileMenuOpen = false;\n\n    function updateScrollIndicator() {\n        if (scrollIndicator) {\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;\n            const scrollPercent = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;\n            scrollIndicator.style.width = Math.min(scrollPercent, 100) + '%';\n        }\n    }\n\n    function toggleMobileMenu() {\n        isMobileMenuOpen = !isMobileMenuOpen;\n    }\n\n    function closeMobileMenu() {\n        isMobileMenuOpen = false;\n    }\n\n    // Adicionar event listener quando o componente for montado\n    if (typeof window !== 'undefined') {\n        window.addEventListener('scroll', updateScrollIndicator);\n    }\n\n    const navItems = [\n        { href: '/', icon: 'fas fa-home', label: 'Home' },\n        { href: '/cardapio', icon: 'fas fa-utensils', label: 'Card√°pio' },\n        { href: '/sobre', icon: 'fas fa-info-circle', label: 'Sobre' },\n        { href: '/contato', icon: 'fas fa-phone', label: 'Contato' }\n    ];\n\n    $: currentPath = $page.url.pathname;\n</script>\n\n<div class=\"scroll-indicator\" bind:this={scrollIndicator}></div>\n\n<header class=\"header\">\n    <div class=\"container\">\n        <nav class=\"nav\">\n            <div class=\"nav-brand\">\n                <a href=\"/\" class=\"brand-logo-link\">\n                    <img\n                        src=\"{base}/logo-lanche-da-si.png\"\n                        alt=\"Logo Lanche da Si\"\n                        class=\"brand-logo\"\n                        on:error={(e) => {\n                            if (e.target instanceof HTMLImageElement) {\n                                e.target.src = `${base}/logo.svg`;\n                            }\n                        }}\n                    />\n                    <span class=\"brand-text\">Lanche da Si</span>\n                </a>\n            </div>\n\n            <nav class=\"nav-links\" id=\"nav-links\" class:active={isMobileMenuOpen} aria-label=\"Menu principal\">\n                {#each navItems as item}\n                    <a \n                        href={item.href} \n                        class=\"nav-link\" \n                        class:active={currentPath === item.href}\n                        on:click={closeMobileMenu}\n                        data-sveltekit-preload-data\n                    >\n                        <i class={item.icon} aria-hidden=\"true\"></i>\n                        <span>{item.label}</span>\n                    </a>\n                {/each}\n            </nav>\n\n            <button\n                class=\"nav-mobile-toggle\"\n                class:active={isMobileMenuOpen}\n                on:click={toggleMobileMenu}\n                aria-label={isMobileMenuOpen ? 'Fechar menu de navega√ß√£o' : 'Abrir menu de navega√ß√£o'}\n                aria-expanded={isMobileMenuOpen}\n                aria-controls=\"nav-links\"\n            >\n                <i class=\"fas {isMobileMenuOpen ? 'fa-times' : 'fa-bars'}\" aria-hidden=\"true\"></i>\n            </button>\n        </nav>\n    </div>\n</header>\n\n<style>\n    .scroll-indicator {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 0%;\n        height: 4px;\n        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));\n        z-index: 9999;\n        transition: width 0.3s ease;\n    }\n\n    .header {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        background: rgba(255, 255, 255, 0.95);\n        backdrop-filter: blur(10px);\n        border-bottom: 1px solid var(--gray-200);\n        z-index: 1000;\n        padding: var(--spacing-3) 0;\n        transition: all 0.3s ease;\n    }\n\n    .container {\n        max-width: 1200px;\n        margin: 0 auto;\n        padding: 0 var(--spacing-4);\n    }\n\n    .nav {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    .nav-brand {\n        display: flex;\n        align-items: center;\n        gap: var(--spacing-3);\n        font-size: var(--font-size-xl);\n        font-weight: 700;\n        color: var(--secondary-color);\n    }\n\n    .brand-logo {\n        width: 40px;\n        height: 40px;\n        object-fit: contain;\n        border-radius: 8px;\n        transition: all 0.3s ease;\n    }\n\n    .brand-logo-link {\n        display: flex;\n        align-items: center;\n        gap: var(--spacing-3);\n        transition: transform 0.3s ease;\n        cursor: pointer;\n        text-decoration: none;\n        color: inherit;\n    }\n\n    .brand-logo-link:hover .brand-logo {\n        transform: scale(1.1);\n        filter: brightness(1.1);\n    }\n\n    .brand-logo-link:hover {\n        transform: translateY(-2px);\n    }\n\n    .brand-logo-link .brand-text {\n        color: var(--secondary-color);\n        transition: color 0.3s ease;\n    }\n\n    .brand-logo-link:hover .brand-text {\n        color: var(--primary-color);\n    }\n\n    .nav-links {\n        display: flex;\n        gap: var(--spacing-6);\n        align-items: center;\n    }\n\n    .nav-link {\n        display: flex;\n        align-items: center;\n        gap: var(--spacing-2);\n        text-decoration: none;\n        color: var(--gray-700);\n        font-weight: 500;\n        font-size: var(--font-size-sm);\n        transition: all 0.3s ease;\n        padding: var(--spacing-2) var(--spacing-3);\n        border-radius: 8px;\n        white-space: nowrap;\n        position: relative;\n    }\n\n    .nav-link:hover {\n        color: var(--secondary-color);\n        background: var(--gray-50);\n        transform: translateY(-1px);\n    }\n\n    .nav-link.active {\n        color: var(--secondary-color);\n        background: var(--primary-color);\n        font-weight: 600;\n    }\n\n    .nav-link.active::after {\n        content: '';\n        position: absolute;\n        bottom: -4px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 20px;\n        height: 2px;\n        background: var(--secondary-color);\n        border-radius: 2px;\n    }\n\n    .nav-link i {\n        font-size: var(--font-size-base);\n    }\n\n    .nav-mobile-toggle {\n        display: none;\n        background: none;\n        border: none;\n        font-size: var(--font-size-xl);\n        color: var(--gray-700);\n        cursor: pointer;\n        padding: var(--spacing-2);\n        border-radius: 8px;\n        transition: all 0.3s ease;\n    }\n\n    .nav-mobile-toggle:hover {\n        background: var(--gray-50);\n        color: var(--secondary-color);\n    }\n\n    @media (max-width: 768px) {\n        .nav-links {\n            position: fixed;\n            top: 100%;\n            left: 0;\n            right: 0;\n            background: var(--white);\n            flex-direction: column;\n            gap: 0;\n            padding: var(--spacing-4);\n            border-top: 1px solid var(--gray-200);\n            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n            transform: translateY(-100%);\n            opacity: 0;\n            visibility: hidden;\n            transition: all 0.3s ease;\n        }\n\n        .nav-links.active {\n            transform: translateY(0);\n            opacity: 1;\n            visibility: visible;\n        }\n\n        .nav-link {\n            width: 100%;\n            padding: var(--spacing-3) var(--spacing-4);\n            border-radius: 0;\n            border-bottom: 1px solid var(--gray-100);\n        }\n\n        .nav-link:last-child {\n            border-bottom: none;\n        }\n\n        .nav-link.active::after {\n            display: none;\n        }\n\n        .nav-mobile-toggle {\n            display: block;\n        }\n\n        .header {\n            padding: var(--spacing-2) 0;\n        }\n\n        .nav-brand {\n            font-size: var(--font-size-lg);\n        }\n\n        .brand-text {\n            display: none;\n        }\n    }\n\n    :global(:root) {\n        --primary-color: #ffedc5;\n        --primary-hover: #ffd980;\n        --secondary-color: #f59e0b;\n        --accent-color: #10b981;\n        --danger-color: #ef4444;\n        --whatsapp-color: #25d366;\n        --white: #ffffff;\n        --gray-50: #f9fafb;\n        --gray-100: #f3f4f6;\n        --gray-200: #e5e7eb;\n        --gray-300: #d1d5db;\n        --gray-400: #9ca3af;\n        --gray-500: #6b7280;\n        --gray-600: #4b5563;\n        --gray-700: #374151;\n        --gray-800: #1f2937;\n        --gray-900: #111827;\n        --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        --font-size-xs: 0.75rem;\n        --font-size-sm: 0.875rem;\n        --font-size-base: 1rem;\n        --font-size-lg: 1.125rem;\n        --font-size-xl: 1.25rem;\n        --font-size-2xl: 1.5rem;\n        --font-size-3xl: 1.875rem;\n        --font-size-4xl: 2.25rem;\n        --spacing-1: 0.25rem;\n        --spacing-2: 0.5rem;\n        --spacing-3: 0.75rem;\n        --spacing-4: 1rem;\n        --spacing-5: 1.25rem;\n        --spacing-6: 1.5rem;\n        --spacing-8: 2rem;\n        --spacing-10: 2.5rem;\n        --spacing-12: 3rem;\n    }\n</style>\n","<script>\n    const whatsappNumber = '5511999999999'; // N√∫mero placeholder\n    const whatsappLink = `https://wa.me/${whatsappNumber}`;\n    \n    const currentYear = new Date().getFullYear();\n\n    const socialLinks = [\n        { icon: 'fab fa-facebook', href: '#', label: 'Facebook' },\n        { icon: 'fab fa-instagram', href: '#', label: 'Instagram' },\n        { icon: 'fab fa-whatsapp', href: whatsappLink, label: 'WhatsApp' }\n    ];\n\n    const navLinks = [\n        { href: '/', label: 'Home' },\n        { href: '/cardapio', label: 'Card√°pio' },\n        { href: '/sobre', label: 'Sobre' },\n        { href: '/contato', label: 'Contato' }\n    ];\n</script>\n\n<footer class=\"footer\">\n    <div class=\"container\">\n        <div class=\"bento-footer\">\n            <!-- Card Principal: Marca -->\n            <div class=\"footer-card brand-card\">\n                <h3 class=\"footer-title\">Lanche da Si</h3>\n                <p class=\"footer-description\">\n                    Tradi√ß√£o e sabor em cada lanche. Preparamos com carinho para voc√™ e sua fam√≠lia.\n                </p>\n                <div class=\"social-links\">\n                    {#each socialLinks as social}\n                        <a \n                            href={social.href} \n                            class=\"social-link\" \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            aria-label={social.label}\n                        >\n                            <i class={social.icon}></i>\n                        </a>\n                    {/each}\n                </div>\n            </div>\n\n            <!-- Card: Hor√°rio -->\n            <div class=\"footer-card hours-card\">\n                <div class=\"card-icon\"><i class=\"fas fa-clock\"></i></div>\n                <h4 class=\"card-title\">Hor√°rios</h4>\n                <div class=\"hours-info\">\n                    <p><strong>Quarta a Domingo</strong></p>\n                    <p>18h √†s 23h</p>\n                    <span class=\"closed-badge\">Segunda e ter√ßa fechado</span>\n                </div>\n            </div>\n\n            <!-- Card: CTA WhatsApp -->\n            <div class=\"footer-card cta-card\">\n                <div class=\"card-icon\"><i class=\"fab fa-whatsapp\"></i></div>\n                <h4 class=\"card-title\">Pe√ßa Agora</h4>\n                <p>Bateu a fome? Pe√ßa pelo WhatsApp e receba em casa.</p>\n                <a href={whatsappLink} target=\"_blank\" rel=\"noopener noreferrer\" class=\"cta-button\">\n                    Fazer Pedido\n                </a>\n            </div>\n\n            <!-- Card: Navega√ß√£o -->\n            <div class=\"footer-card nav-card\">\n                <h4 class=\"card-title\">Explorar</h4>\n                <nav class=\"footer-nav\">\n                    {#each navLinks as link}\n                        <a href={link.href} class=\"footer-link\" data-sveltekit-preload-data>\n                            {link.label}\n                        </a>\n                    {/each}\n                </nav>\n            </div>\n        </div>\n\n        <div class=\"footer-bottom\">\n            <p>&copy; {currentYear} Lanche da Si. Todos os direitos reservados.</p>\n            <p class=\"made-with\">\n                Feito com <span class=\"heart\">‚ù§Ô∏è</span> para voc√™\n            </p>\n        </div>\n    </div>\n</footer>\n\n<style>\n    .footer {\n        background: var(--gray-900);\n        color: var(--gray-200);\n        padding: var(--spacing-12) 0 var(--spacing-6) 0;\n        margin-top: auto;\n    }\n\n    .container {\n        max-width: 1200px;\n        margin: 0 auto;\n        padding: 0 var(--spacing-4);\n    }\n\n    .bento-footer {\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        grid-template-rows: auto auto;\n        gap: var(--spacing-4);\n        margin-bottom: var(--spacing-12);\n    }\n\n    .footer-card {\n        background: var(--gray-800);\n        border-radius: 24px;\n        padding: var(--spacing-6);\n        border: 1px solid var(--gray-700);\n        display: flex;\n        flex-direction: column;\n        transition: transform 0.3s ease, border-color 0.3s ease;\n    }\n\n    .footer-card:hover {\n        border-color: var(--primary-color);\n        transform: translateY(-4px);\n    }\n\n    /* Layout do Grid */\n    .brand-card {\n        grid-column: span 2;\n        grid-row: span 1;\n        justify-content: center;\n    }\n\n    .hours-card {\n        grid-column: span 1;\n    }\n\n    .cta-card {\n        grid-column: span 1;\n        grid-row: span 2;\n        background: linear-gradient(135deg, var(--gray-800) 0%, #1e293b 100%);\n        border: 1px solid var(--secondary-color);\n        justify-content: space-between;\n    }\n\n    .nav-card {\n        grid-column: span 3;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n        padding: var(--spacing-4) var(--spacing-8);\n    }\n\n    /* Elementos Internos */\n    .footer-title {\n        font-size: 2rem;\n        font-weight: 800;\n        color: var(--primary-color);\n        margin-bottom: var(--spacing-2);\n    }\n\n    .footer-description {\n        color: var(--gray-400);\n        max-width: 400px;\n    }\n\n    .card-title {\n        font-size: var(--font-size-lg);\n        font-weight: 700;\n        color: var(--white);\n        margin-bottom: var(--spacing-4);\n    }\n\n    .card-icon {\n        font-size: 1.5rem;\n        color: var(--primary-color);\n        margin-bottom: var(--spacing-4);\n    }\n\n    .social-links {\n        display: flex;\n        gap: var(--spacing-3);\n        margin-top: var(--spacing-6);\n    }\n\n    .social-link {\n        width: 44px;\n        height: 44px;\n        border-radius: 12px;\n        background: var(--gray-700);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n        font-size: 1.2rem;\n        transition: all 0.3s ease;\n    }\n\n    .social-link:hover {\n        background: var(--primary-color);\n        color: var(--gray-900);\n    }\n\n    .hours-info p {\n        margin: 0;\n        line-height: 1.4;\n    }\n\n    .closed-badge {\n        display: inline-block;\n        margin-top: var(--spacing-4);\n        padding: 4px 12px;\n        background: rgba(239, 68, 68, 0.1);\n        color: #f87171;\n        border-radius: 20px;\n        font-size: 0.8rem;\n        font-weight: 600;\n    }\n\n    .cta-button {\n        display: block;\n        width: 100%;\n        padding: var(--spacing-4);\n        background: var(--secondary-color);\n        color: white;\n        text-align: center;\n        text-decoration: none;\n        border-radius: 16px;\n        font-weight: 700;\n        margin-top: var(--spacing-4);\n        transition: all 0.3s ease;\n    }\n\n    .cta-button:hover {\n        background: #d97706;\n        box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);\n    }\n\n    .footer-nav {\n        display: flex;\n        gap: var(--spacing-8);\n    }\n\n    .footer-link {\n        color: var(--gray-400);\n        text-decoration: none;\n        font-weight: 600;\n        transition: color 0.3s;\n    }\n\n    .footer-link:hover {\n        color: var(--primary-color);\n    }\n\n    .footer-bottom {\n        border-top: 1px solid var(--gray-800);\n        padding-top: var(--spacing-8);\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        color: var(--gray-500);\n        font-size: var(--font-size-sm);\n    }\n\n    .heart {\n        color: var(--danger-color);\n        display: inline-block;\n        animation: heartbeat 1.5s ease-in-out infinite;\n    }\n\n    @keyframes heartbeat {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.1); }\n    }\n\n    /* Mobile First Adjustments */\n    @media (max-width: 1024px) {\n        .bento-footer {\n            grid-template-columns: repeat(2, 1fr);\n        }\n        .nav-card {\n            grid-column: span 2;\n        }\n    }\n\n    @media (max-width: 640px) {\n        .bento-footer {\n            grid-template-columns: 1fr;\n        }\n        .brand-card, .hours-card, .cta-card, .nav-card {\n            grid-column: span 1;\n            grid-row: span 1;\n        }\n        .nav-card {\n            flex-direction: column;\n            gap: var(--spacing-4);\n        }\n        .footer-nav {\n            flex-direction: column;\n            gap: var(--spacing-2);\n            align-items: center;\n        }\n        .footer-bottom {\n            flex-direction: column;\n            gap: var(--spacing-4);\n            text-align: center;\n        }\n    }\n</style>\n","import { findItemById } from './loadMenu.js';\nimport type { MenuItem, MenuData } from '$lib/types/menu';\n\n/**\n * Interface para item no carrinho\n */\nexport interface CartItem extends MenuItem {\n  quantity: number;\n}\n\n/**\n * Interface para resultado de valida√ß√£o de item\n */\nexport interface ValidationResult {\n  valid: boolean;\n  error: string | null;\n  validatedItem: CartItem | null;\n}\n\n/**\n * Interface para resultado de rec√°lculo do carrinho\n */\nexport interface RecalculateResult {\n  items: CartItem[];\n  invalid: CartItem[];\n  errors: string[] | null;\n}\n\n/**\n * Interface para resultado de valida√ß√£o de checkout\n */\nexport interface CheckoutValidationResult {\n  valid: boolean;\n  errors: string[] | null;\n  validatedCart: CartItem[];\n  total: number;\n  invalidItems?: CartItem[];\n}\n\n/**\n * Interface para resultado de truncamento de mensagem\n */\nexport interface TruncateResult {\n  message: string;\n  truncated: boolean;\n}\n\nexport function validateItem(item: Partial<CartItem>, menuData: MenuData): ValidationResult {\n    if (!item?.id) {\n        return { valid: false, error: 'Item inv√°lido: ID ausente', validatedItem: null };\n    }\n\n    const menuItem = findItemById(menuData, item.id);\n    if (!menuItem) {\n        return { valid: false, error: `Item n√£o encontrado no card√°pio: ${item.id}`, validatedItem: null };\n    }\n\n    const validatedItem: CartItem = {\n        ...item,\n        ...menuItem,\n        quantity: item.quantity || 1\n    };\n\n    if (item.price !== undefined && item.price !== menuItem.price) {\n        console.warn(`Price mismatch for ${item.id}: cart=${item.price}, menu=${menuItem.price}`);\n        return { valid: false, error: `Pre√ßo incorreto para ${menuItem.name}`, validatedItem };\n    }\n\n    return { valid: true, error: null, validatedItem };\n}\n\nconst MIN_QTY = 1;\nconst MAX_QTY = 10;\n\nexport function sanitizeQuantity(qty: number | string): number {\n    const num = Number(qty);\n    if (isNaN(num)) return MIN_QTY;\n    if (!isFinite(num)) return num > 0 ? MAX_QTY : MIN_QTY;\n    return Math.max(MIN_QTY, Math.min(MAX_QTY, Math.floor(num)));\n}\n\nexport function recalculateCart(cartItems: Partial<CartItem>[], menuData: MenuData): RecalculateResult {\n    if (!Array.isArray(cartItems)) {\n        return { items: [], invalid: [], errors: ['Carrinho inv√°lido'] };\n    }\n\n    const validItems: CartItem[] = [];\n    const invalidItems: CartItem[] = [];\n    const errors: string[] = [];\n\n    for (const item of cartItems) {\n        const safeQuantity = sanitizeQuantity(item.quantity || 1);\n        const validation = validateItem({ ...item, quantity: safeQuantity }, menuData);\n\n        if (validation.valid || validation.validatedItem) {\n            validItems.push({ ...validation.validatedItem!, quantity: safeQuantity });\n            if (!validation.valid) {\n                errors.push(`${validation.error} - pre√ßo corrigido`);\n            }\n        } else {\n            invalidItems.push(item as CartItem);\n            errors.push(validation.error!);\n        }\n    }\n\n    return { items: validItems, invalid: invalidItems, errors: errors.length ? errors : null };\n}\n\nexport function calculateTotal(cartItems: CartItem[]): number {\n    if (!Array.isArray(cartItems)) return 0;\n    return cartItems.reduce((total, item) => {\n        return total + (Number(item.price) || 0) * sanitizeQuantity(item.quantity);\n    }, 0);\n}\n\nexport function truncateWhatsAppMessage(message: string, maxChars: number = 1800): TruncateResult {\n    if (!message || typeof message !== 'string') {\n        return { message: '', truncated: false };\n    }\n    if (message.length <= maxChars) {\n        return { message, truncated: false };\n    }\n\n    const cutoff = maxChars - 100;\n    const lastNewline = message.lastIndexOf('\\n', cutoff);\n    const truncateAt = lastNewline > cutoff - 200 ? lastNewline : cutoff;\n    \n    return {\n        message: message.substring(0, truncateAt) + \n            '\\n\\n‚ö†Ô∏è Mensagem muito grande - itens resumidos.\\n' +\n            'Entre em contato para completar o pedido.',\n        truncated: true\n    };\n}\n\nexport function validateCartForCheckout(cartItems: Partial<CartItem>[], menuData: MenuData): CheckoutValidationResult {\n    if (!cartItems?.length) {\n        return { valid: false, errors: ['Carrinho vazio'], validatedCart: [], total: 0 };\n    }\n\n    const recalculated = recalculateCart(cartItems, menuData);\n    const total = calculateTotal(recalculated.items);\n    \n    if (recalculated.invalid.length > 0) {\n        return {\n            valid: false,\n            errors: recalculated.errors || ['Itens inv√°lidos no carrinho'],\n            validatedCart: recalculated.items,\n            total,\n            invalidItems: recalculated.invalid\n        };\n    }\n\n    return { valid: true, errors: recalculated.errors, validatedCart: recalculated.items, total };\n}\n","const CART_STORAGE_KEY = 'lanchedasi_cart';\n\nexport class CartRepository {\n    /**\n     * @returns {any[]}\n     */\n    static getCart(): any[] {\n        if (typeof window === 'undefined') return [];\n        try {\n            const saved = localStorage.getItem(CART_STORAGE_KEY);\n            return saved ? JSON.parse(saved) : [];\n        } catch (e) {\n            console.error('Failed to load cart from localStorage', e);\n            return [];\n        }\n    }\n\n    /**\n     * @param {any[]} items \n     */\n    static saveCart(items: any[]): void {\n        if (typeof window === 'undefined') return;\n        try {\n            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(items));\n        } catch (e) {\n            console.error('Failed to save cart to localStorage', e);\n        }\n    }\n\n    static clearCart(): void {\n        if (typeof window === 'undefined') return;\n        localStorage.removeItem(CART_STORAGE_KEY);\n    }\n}\n","import { sanitizeQuantity } from '$lib/utils/CartValidator';\n\nexport class PriceService {\n    /**\n     * Calcula o valor total de uma lista de itens do carrinho.\n     * @param {Array} cartItems - Lista de itens com pre√ßo e quantidade.\n     * @returns {number} O valor total formatado numericamente.\n     */\n    static calculateTotal(cartItems) {\n        if (!Array.isArray(cartItems)) return 0;\n        \n        return cartItems.reduce((total, item) => {\n            const price = Number(item.price) || 0;\n            const quantity = sanitizeQuantity(item.quantity);\n            return total + (price * quantity);\n        }, 0);\n    }\n\n    /**\n     * Calcula a quantidade total de itens no carrinho.\n     * @param {Array} cartItems - Lista de itens do carrinho.\n     * @returns {number} A soma de todas as quantidades.\n     */\n    static calculateItemCount(cartItems) {\n        if (!Array.isArray(cartItems)) return 0;\n\n        return cartItems.reduce((count, item) => {\n            const quantity = sanitizeQuantity(item.quantity);\n            return count + quantity;\n        }, 0);\n    }\n\n    /**\n     * Formata um valor num√©rico para o padr√£o de moeda BRL (R$).\n     * @param {number} value - O valor a ser formatado.\n     * @returns {string} O valor formatado como moeda.\n     */\n    static formatCurrency(value) {\n        return new Intl.NumberFormat('pt-BR', {\n            style: 'currency',\n            currency: 'BRL'\n        }).format(value);\n    }\n}\n","import { writable, type Writable } from 'svelte/store';\nimport { sanitizeQuantity } from '$lib/utils/CartValidator';\nimport { CartRepository } from '$lib/repositories/CartRepository';\nimport { PriceService } from '$lib/services/PriceService';\nimport type { CartItem, Product } from '$lib/types/models';\n\nexport interface CartStore extends Writable<CartItem[]> {\n    init: () => void;\n    addItem: (item: Product) => void;\n    removeItem: (id: string) => void;\n    updateQuantity: (id: string, quantity: number) => void;\n    clear: () => void;\n    getTotal: (cartItems: CartItem[]) => number;\n    getItemCount: (cartItems: CartItem[]) => number;\n}\n\nfunction createCart(): CartStore {\n    const { subscribe, set, update } = writable<CartItem[]>([]);\n\n    return {\n        subscribe,\n        set,\n        update,\n        init: () => {\n            const initialCart = CartRepository.getCart() as CartItem[];\n            set(initialCart);\n        },\n        addItem: (item: Product) => update(cart => {\n            if (!item || !item.id || !item.name || item.price === undefined || item.isAvailable === false) {\n                console.warn('Item not available or invalid:', item);\n                return cart;\n            }\n\n            const existingItemIndex = cart.findIndex(cartItem => cartItem.id === item.id);\n            let newCart: CartItem[];\n            if (existingItemIndex !== -1) {\n                newCart = [...cart];\n                const newQuantity = sanitizeQuantity(newCart[existingItemIndex].quantity + 1);\n                newCart[existingItemIndex] = { ...newCart[existingItemIndex], quantity: newQuantity };\n            } else {\n                newCart = [...cart, { ...item, quantity: 1 }];\n            }\n            CartRepository.saveCart(newCart);\n            return newCart;\n        }),\n        removeItem: (id: string) => update(cart => {\n            const newCart = cart.filter(item => item.id !== id);\n            CartRepository.saveCart(newCart);\n            return newCart;\n        }),\n        updateQuantity: (id: string, quantity: number) => update(cart => {\n            let newCart: CartItem[];\n            const num = Number(quantity);\n            if (!isNaN(num) && isFinite(num) && num <= 0) {\n                newCart = cart.filter(item => item.id !== id);\n            } else {\n                const safeQuantity = sanitizeQuantity(quantity);\n                newCart = cart.map(item => {\n                    if (item.id === id) {\n                        return { ...item, quantity: safeQuantity };\n                    }\n                    return item;\n                });\n            }\n            CartRepository.saveCart(newCart);\n            return newCart;\n        }),\n        clear: () => {\n            CartRepository.clearCart();\n            set([]);\n        },\n        getTotal: (cartItems: CartItem[]) => PriceService.calculateTotal(cartItems),\n        getItemCount: (cartItems: CartItem[]) => PriceService.calculateItemCount(cartItems)\n    };\n}\n\nexport const cart = createCart();\n","export async function reverseGeocode(lat: number, lng: number): Promise<string> {\n    try {\n        const nominatimResponse = await fetch(\n            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&zoom=18&addressdetails=1&accept-language=pt-BR,pt,en`,\n            { headers: { 'User-Agent': 'LancheDaSi/1.0' } }\n        );\n\n        if (nominatimResponse.ok) {\n            const addr = (await nominatimResponse.json()).address;\n            if (addr) {\n                const parts = [\n                    addr.house_number && addr.road ? `${addr.road}, ${addr.house_number}` : (addr.road || addr.street || addr.pedestrian),\n                    addr.neighbourhood || addr.suburb || addr.quarter || addr.district,\n                    addr.city || addr.town || addr.village || addr.municipality,\n                    addr.state\n                ].filter(Boolean);\n                if (parts.length >= 2) return parts.join(', ');\n            }\n        }\n\n        const bdcResponse = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lng}&localityLanguage=pt`);\n        if (bdcResponse.ok) {\n            const data = await bdcResponse.json();\n            const parts = [];\n            if (data.localityInfo?.administrative) {\n                const admin = data.localityInfo.administrative.sort((a: any, b: any) => (b.adminLevel || 0) - (a.adminLevel || 0));\n                const street = admin.find((i: any) => i.adminLevel >= 8);\n                if (street) parts.push(street.name);\n                const neighborhood = admin.find((i: any) => i.adminLevel >= 6 && i.adminLevel <= 7 && i.name !== street?.name);\n                if (neighborhood) parts.push(neighborhood.name);\n            }\n            parts.push(data.city || data.locality, data.principalSubdivision);\n            const filtered = parts.filter(Boolean);\n            if (filtered.length >= 2) return filtered.join(', ');\n        }\n    } catch (e) {\n        console.error('Geocoding error', e);\n    }\n    return `Localiza√ß√£o: ${lat.toFixed(6)}, ${lng.toFixed(6)}`;\n}\n\nexport async function geocodeAddress(address: string): Promise<{ lat: number; lng: number } | null> {\n    try {\n        const query = encodeURIComponent(address + ', Manaus, Amazonas, Brasil');\n        const res = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${query}&limit=1&countrycodes=br`, {\n            headers: { 'User-Agent': 'LancheDaSi/1.0' }\n        });\n        if (res.ok) {\n            const data = await res.json();\n            if (data?.[0]) return { lat: parseFloat(data[0].lat), lng: parseFloat(data[0].lon) };\n        }\n    } catch (e) {\n        console.error('GeocodeAddress error', e);\n    }\n    return null;\n}\n","import { writable, type Writable } from 'svelte/store';\nimport type { OrderStoreState, Location } from '$lib/types/models';\nimport { geocodeAddress, reverseGeocode } from '$lib/utils/GeocodingUtils';\n\nconst STORE_LOCATION = {\n    lat: -3.0796612,\n    lng: -60.0481757,\n    address: 'Rua Itoror√≥, Dom Pedro I, Manaus, Amazonas'\n};\n\nconst DELIVERY_CONFIG = {\n    freeDeliveryDistance: 3,\n    pricePerKm: 2.50,\n    maxDeliveryDistance: 15\n};\n\nexport interface OrderInfoStore extends Writable<OrderStoreState> {\n    setObservations: (observations: string) => void;\n    setAddress: (address: string) => void;\n    setManualAddress: (address: string) => void;\n    setAddressWithGeocode: (address: string) => Promise<{ success: boolean; distance: number | null; deliveryFee: number; canDeliver: boolean }>;\n    setLocation: (location: Location) => void;\n    setLoadingLocation: (isLoading: boolean) => void;\n    clear: () => void;\n    getLocationAsync: () => Promise<{ location: Location; address: string; distance: number; deliveryFee: number; canDeliver: boolean }>;\n}\n\nfunction calculateDistance(lat1: number, lon1: number, lat2: number, lon2: number): number {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * (Math.PI/180);\n    const dLon = (lon2 - lon1) * (Math.PI/180);\n    const a =\n        Math.sin(dLat/2) * Math.sin(dLat/2) +\n        Math.cos(lat1 * (Math.PI/180)) * Math.cos(lat2 * (Math.PI/180)) *\n        Math.sin(dLon/2) * Math.sin(dLon/2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n    return Math.round(R * c * 100) / 100;\n}\n\nfunction calculateDeliveryFee(distance: number): number {\n    if (distance <= DELIVERY_CONFIG.freeDeliveryDistance) return 0;\n    return Math.ceil(distance - DELIVERY_CONFIG.freeDeliveryDistance) * DELIVERY_CONFIG.pricePerKm;\n}\n\nfunction createOrderInfo(): OrderInfoStore {\n    const initialState: OrderStoreState = {\n        observations: '',\n        location: null,\n        address: '',\n        distance: null,\n        deliveryFee: 0,\n        canDeliver: true,\n        isLoadingLocation: false\n    };\n\n    const { subscribe, set, update } = writable<OrderStoreState>(initialState);\n\n    return {\n        subscribe,\n        set,\n        update,\n        setObservations: (observations: string) => update(state => ({ ...state, observations })),\n        setAddress: (address: string) => update(state => ({ ...state, address })),\n        setManualAddress: (address: string) => {\n            update(state => ({ ...state, address, location: null, distance: null, deliveryFee: 0, canDeliver: true, isLoadingLocation: false }));\n        },\n        setAddressWithGeocode: async (address: string) => {\n            update(state => ({ ...state, isLoadingLocation: true }));\n            const coords = await geocodeAddress(address);\n            if (coords) {\n                const distance = calculateDistance(STORE_LOCATION.lat, STORE_LOCATION.lng, coords.lat, coords.lng);\n                const deliveryFee = calculateDeliveryFee(distance);\n                const canDeliver = distance <= DELIVERY_CONFIG.maxDeliveryDistance;\n                update(state => ({ ...state, address, location: { latitude: coords.lat, longitude: coords.lng, accuracy: null }, distance, deliveryFee, canDeliver, isLoadingLocation: false }));\n                return { success: true, distance, deliveryFee, canDeliver };\n            }\n            update(state => ({ ...state, address, location: null, distance: null, deliveryFee: 0, canDeliver: true, isLoadingLocation: false }));\n            return { success: true, distance: null, deliveryFee: 0, canDeliver: true };\n        },\n        setLocation: (location: Location) => {\n            const distance = calculateDistance(STORE_LOCATION.lat, STORE_LOCATION.lng, location.latitude, location.longitude);\n            const deliveryFee = calculateDeliveryFee(distance);\n            const canDeliver = distance <= DELIVERY_CONFIG.maxDeliveryDistance;\n            update(state => ({ ...state, location, distance, deliveryFee, canDeliver, isLoadingLocation: false }));\n        },\n        setLoadingLocation: (isLoading: boolean) => update(state => ({ ...state, isLoadingLocation: isLoading })),\n        clear: () => set(initialState),\n        getLocationAsync: async () => {\n            return new Promise((resolve, reject) => {\n                if (!navigator.geolocation) {\n                    reject(new Error('Geolocaliza√ß√£o n√£o √© suportada pelo navegador'));\n                    return;\n                }\n                update(state => ({ ...state, isLoadingLocation: true }));\n                navigator.geolocation.getCurrentPosition(\n                    async (position) => {\n                        const location: Location = { latitude: position.coords.latitude, longitude: position.coords.longitude, accuracy: position.coords.accuracy };\n                        const distance = calculateDistance(STORE_LOCATION.lat, STORE_LOCATION.lng, location.latitude, location.longitude);\n                        const deliveryFee = calculateDeliveryFee(distance);\n                        const canDeliver = distance <= DELIVERY_CONFIG.maxDeliveryDistance;\n                        try {\n                            const address = await reverseGeocode(location.latitude, location.longitude);\n                            update(state => ({ ...state, location, address, distance, deliveryFee, canDeliver, isLoadingLocation: false }));\n                            resolve({ location, address, distance, deliveryFee, canDeliver });\n                        } catch (error) {\n                            const fallbackAddress = `Localiza√ß√£o: ${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}`;\n                            update(state => ({ ...state, location, address: fallbackAddress, distance, deliveryFee, canDeliver, isLoadingLocation: false }));\n                            resolve({ location, address: fallbackAddress, distance, deliveryFee, canDeliver });\n                        }\n                    },\n                    (error) => {\n                        update(state => ({ ...state, isLoadingLocation: false }));\n                        reject(new Error('Erro ao obter localiza√ß√£o'));\n                    },\n                    { enableHighAccuracy: true, timeout: 15000, maximumAge: 60000 }\n                );\n            });\n        }\n    };\n}\n\nexport const orderInfo = createOrderInfo();\n","import { get } from 'svelte/store';\nimport { cart } from '../stores/cart';\nimport { z } from 'zod';\nimport LoggerService from './LoggerService';\nimport { UserRepository } from '../repositories/UserRepository';\nimport type { CustomerInfo, CartItem } from '$lib/types/models';\n\nexport const OrderSchema = z.object({\n    name: z.string().min(2, \"O nome deve ter pelo menos 2 caracteres\"),\n    phone: z.string().min(10, \"Informe um telefone v√°lido (DDD + N√∫mero)\"),\n    address: z.string().min(5, \"Informe o endere√ßo completo\"),\n    paymentMethod: z.enum(['dinheiro', 'pix', 'cartao']),\n    change: z.string().optional()\n});\n\nexport class CheckoutService {\n    static generateIdempotencyKey(customer: CustomerInfo, items: CartItem[]): string {\n        const payload = JSON.stringify({\n            phone: customer.phone,\n            items: items.map(i => ({ id: i.id, q: i.quantity })),\n            minute: Math.floor(Date.now() / 60000)\n        });\n        \n        let hash = 0;\n        for (let i = 0; i < payload.length; i++) {\n            hash = ((hash << 5) - hash) + payload.charCodeAt(i);\n            hash |= 0;\n        }\n        return `order_${Math.abs(hash)}_${Math.floor(Date.now() / 60000)}`;\n    }\n\n    static saveCustomerInfo(info: CustomerInfo): void {\n        if (typeof window !== 'undefined') {\n            try {\n                localStorage.setItem('customer_info', JSON.stringify(info));\n                LoggerService.info('Informa√ß√µes do cliente salvas no localStorage');\n            } catch (e: any) {\n                LoggerService.warn('Falha ao salvar info no localStorage', { error: e.message });\n            }\n        }\n    }\n\n    static loadCustomerInfo(): CustomerInfo | null {\n        if (typeof window !== 'undefined') {\n            try {\n                const saved = localStorage.getItem('customer_info');\n                if (saved) {\n                    LoggerService.info('Informa√ß√µes do cliente recuperadas com sucesso');\n                    return JSON.parse(saved);\n                }\n            } catch (e: any) {\n                LoggerService.warn('Falha ao ler info do localStorage', { error: e.message });\n            }\n        }\n        return null;\n    }\n\n    static buildWhatsAppMessage(customer: CustomerInfo, items: CartItem[], total: number): string {\n        let message = `*Novo Pedido - Lanche da Si*\\n\\n`;\n        message += `*Cliente:* ${customer.name}\\n`;\n        message += `*Telefone:* ${customer.phone}\\n`;\n        message += `*Endere√ßo:* ${customer.address}\\n`;\n        message += `*Pagamento:* ${customer.paymentMethod.toUpperCase()}\\n`;\n        \n        if (customer.paymentMethod === 'dinheiro' && customer.change) {\n            message += `*Troco para:* ${customer.change}\\n`;\n        }\n        \n        message += `\\n*Itens:*\\n`;\n        items.forEach(item => {\n            message += `- ${item.quantity}x ${item.name} (R$ ${item.price.toFixed(2)})\\n`;\n        });\n\n        message += `\\n*Total: R$ ${total.toFixed(2)}*`;\n        \n        return encodeURIComponent(message);\n    }\n\n    static async processOrder(customerData: CustomerInfo): Promise<string> {\n        const currentCart = get(cart);\n        const idempotencyKey = this.generateIdempotencyKey(customerData, currentCart);\n\n        if (typeof window !== 'undefined') {\n            const lastKey = sessionStorage.getItem('last_order_key');\n            if (lastKey === idempotencyKey) {\n                LoggerService.warn('Tentativa de pedido duplicado bloqueada (Idempot√™ncia)', { key: idempotencyKey });\n                throw new Error(\"Este pedido j√° est√° sendo processado. Verifique seu WhatsApp.\");\n            }\n            sessionStorage.setItem('last_order_key', idempotencyKey);\n        }\n\n        LoggerService.info('Iniciando processamento de pedido', { \n            itemsCount: currentCart.length,\n            paymentMethod: customerData.paymentMethod,\n            key: idempotencyKey\n        });\n\n        const validation = OrderSchema.safeParse(customerData);\n        if (!validation.success) {\n            const firstError = validation.error.errors[0];\n            LoggerService.warn('Falha na valida√ß√£o do checkout', { \n                field: firstError.path[0],\n                message: firstError.message\n            });\n            throw new Error(firstError.message);\n        }\n\n        const total = currentCart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n\n        if (currentCart.length === 0) {\n            LoggerService.error('Checkout com carrinho vazio');\n            throw new Error(\"Seu carrinho est√° vazio!\");\n        }\n\n        this.saveCustomerInfo(customerData);\n        UserRepository.saveUser({ name: customerData.name, phone: customerData.phone });\n\n        const phoneNumber = \"5592991144080\";\n        const message = this.buildWhatsAppMessage(customerData, currentCart, total);\n        \n        LoggerService.info('Pedido processado com sucesso');\n        return `https://wa.me/${phoneNumber}?text=${message}`;\n    }\n}\n","<script>\n    import { cart } from '$lib/stores/cart';\n    import { orderInfo } from '$lib/stores/orderInfo';\n    import { PriceService } from '$lib/services/PriceService';\n    import CartItem from './CartItem.svelte';\n    import CheckoutModal from '../Checkout/CheckoutModal.svelte';\n    import CheckoutForm from '../molecules/CheckoutForm.svelte';\n    import DeliverySelector from '../molecules/DeliverySelector.svelte';\n    import { tick } from 'svelte';\n    import { browser } from '$app/environment';\n\n    let isOpen = false;\n    let showCheckoutModal = false;\n    let cartToggleButton;\n    let cartPanel;\n    let observations = '';\n\n    async function openCart() {\n        isOpen = true;\n        await tick();\n        cartPanel?.querySelector('.close-btn')?.focus();\n    }\n\n    function closeCart() {\n        isOpen = false;\n        cartToggleButton?.focus();\n    }\n\n    function toggleCart() {\n        isOpen ? closeCart() : openCart();\n    }\n\n    function handleDialogKeydown(e) {\n        if (e.key === 'Escape') {\n            closeCart();\n            return;\n        }\n        if (e.key === 'Tab' && cartPanel) {\n            const focusable = cartPanel.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex=\"-1\"])');\n            const first = focusable[0];\n            const last = focusable[focusable.length - 1];\n            if (e.shiftKey && document.activeElement === first) {\n                last?.focus();\n                e.preventDefault();\n            } else if (!e.shiftKey && document.activeElement === last) {\n                first?.focus();\n                e.preventDefault();\n            }\n        }\n    }\n\n    function generateWhatsAppMessage(cartItems, total, orderData) {\n        let message = \"üçî *Pedido - Lanche da Si*\\n\\n\";\n        cartItems.forEach(item => {\n            message += `‚Ä¢ ${item.quantity}x ${item.name}\\n  ${PriceService.formatCurrency(item.price * item.quantity)}\\n\\n`;\n        });\n        message += `üí∞ *Subtotal: ${PriceService.formatCurrency(total)}*\\n`;\n        if (orderData.location && orderData.distance !== null) {\n            message += `üöö *Entrega (${orderData.distance}km): ${PriceService.formatCurrency(orderData.deliveryFee)}*\\n`;\n            message += `üí∞ *Total: ${PriceService.formatCurrency(total + orderData.deliveryFee)}*\\n\\n`;\n        } else {\n            message += `üí∞ *Total: ${PriceService.formatCurrency(total)}*\\n\\n`;\n        }\n        if (orderData.observations.trim()) message += `üìù *Observa√ß√µes:*\\n${orderData.observations}\\n\\n`;\n        if (orderData.address) {\n            message += `üìç *Endere√ßo:*\\n${orderData.address}\\n`;\n        } else {\n            message += \"üìç *Endere√ßo:*\\n(Favor informar endere√ßo completo)\\n\\n\";\n        }\n        message += \"Obrigado pela prefer√™ncia! üòä\";\n        return encodeURIComponent(message);\n    }\n\n    function sendOrder() {\n        if ($cart.length === 0) return;\n        orderInfo.setObservations(observations);\n        const total = cart.getTotal($cart);\n        const message = generateWhatsAppMessage($cart, total, $orderInfo);\n        window.open(`https://wa.me/5592993525884?text=${message}`, '_blank');\n    }\n\n    $: itemCount = cart.getItemCount($cart);\n    $: total = cart.getTotal($cart);\n    $: finalTotal = total + ($orderInfo.deliveryFee || 0);\n</script>\n\n<div class=\"cart-container\">\n    <button \n        bind:this={cartToggleButton}\n        class=\"cart-toggle\" \n        on:click={toggleCart} \n        class:has-items={itemCount > 0}\n        aria-label=\"Abrir carrinho\"\n        aria-expanded={isOpen}\n    >\n        <i class=\"fas fa-shopping-cart\" aria-hidden=\"true\"></i>\n        {#if itemCount > 0}\n            <span class=\"cart-badge\">{itemCount}</span>\n        {/if}\n    </button>\n\n    {#if isOpen}\n        <div class=\"cart-overlay\" on:click={closeCart} aria-hidden=\"true\"></div>\n        <div \n            bind:this={cartPanel}\n            class=\"cart-panel\"\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby=\"cart-title\"\n            on:keydown={handleDialogKeydown}\n        >\n            <div class=\"cart-header\">\n                <h3 id=\"cart-title\">Seu Pedido</h3>\n                <button class=\"close-btn\" on:click={closeCart} aria-label=\"Fechar\">\n                    <i class=\"fas fa-times\" aria-hidden=\"true\"></i>\n                </button>\n            </div>\n\n            <div class=\"cart-content\">\n                {#if $cart.length === 0}\n                    <div class=\"empty-cart\">\n                        <i class=\"fas fa-shopping-cart\"></i>\n                        <p>Seu carrinho est√° vazio</p>\n                    </div>\n                {:else}\n                    <div class=\"cart-items\" aria-live=\"polite\">\n                        {#each $cart as item}\n                            <CartItem {item} />\n                        {/each}\n                    </div>\n\n                    {#if browser}\n                        <div class=\"order-details\">\n                            <CheckoutForm bind:observations />\n                            <DeliverySelector />\n                        </div>\n\n                        <div class=\"cart-footer\">\n                            <div class=\"order-summary\">\n                                <div class=\"summary-line\"><span>Subtotal:</span><span>{PriceService.formatCurrency(total)}</span></div>\n                                {#if $orderInfo.deliveryFee > 0}\n                                    <div class=\"summary-line\"><span>Entrega:</span><span>{PriceService.formatCurrency($orderInfo.deliveryFee)}</span></div>\n                                {:else if $orderInfo.deliveryFee === 0 && $orderInfo.distance !== null}\n                                    <div class=\"summary-line free-delivery\"><span>Entrega:</span><span>Gr√°tis! üéâ</span></div>\n                                {/if}\n                                <div class=\"summary-line total\"><strong>Total: {PriceService.formatCurrency(finalTotal)}</strong></div>\n                            </div>\n                            <div class=\"footer-buttons\">\n                                <button class=\"order-btn checkout-btn\" on:click={() => showCheckoutModal = true}>Finalizar Pedido</button>\n                                <button class=\"order-btn legacy-btn\" on:click={sendOrder} disabled={!$orderInfo.canDeliver && $orderInfo.location}>Pedido R√°pido (WhatsApp)</button>\n                            </div>\n                        </div>\n                    {/if}\n                {/if}\n            </div>\n        </div>\n    {/if}\n\n    {#if showCheckoutModal}\n        <CheckoutModal cartItems={$cart} onClose={() => showCheckoutModal = false} onConfirm={() => { cart.clear(); showCheckoutModal = false; closeCart(); }} />\n    {/if}\n</div>\n\n<style>\n    .cart-container { position: fixed; bottom: var(--spacing-6); right: var(--spacing-6); z-index: 1000; }\n    .cart-toggle { background: var(--secondary-color); color: var(--white); border: none; width: 60px; height: 60px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: var(--font-size-xl); box-shadow: 0 4px 20px rgba(0,0,0,0.15); transition: all 0.3s ease; position: relative; }\n    .cart-toggle.has-items { animation: pulse 2s infinite; }\n    .cart-badge { position: absolute; top: -8px; right: -8px; background: var(--danger-color); color: var(--white); border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: var(--font-size-xs); font-weight: bold; }\n    .cart-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 998; }\n    .cart-panel { position: fixed; top: 0; right: 0; width: 400px; height: 100vh; background: var(--white); z-index: 999; display: flex; flex-direction: column; box-shadow: -4px 0 20px rgba(0,0,0,0.1); overflow: hidden; }\n    .cart-header { display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-6); border-bottom: 1px solid var(--gray-200); }\n    .cart-header h3 { margin: 0; font-size: var(--font-size-2xl); font-weight: 700; }\n    .close-btn { background: none; border: none; font-size: var(--font-size-xl); color: var(--gray-500); cursor: pointer; }\n    .cart-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; }\n    .empty-cart { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--gray-500); }\n    .empty-cart i { font-size: 4rem; }\n    .cart-items { flex: 1; overflow-y: auto; padding: var(--spacing-4); }\n    .order-details { padding: var(--spacing-6); border-top: 1px solid var(--gray-200); background: var(--gray-50); flex-shrink: 0; max-height: 300px; overflow-y: auto; }\n    .cart-footer { padding: var(--spacing-6); border-top: 1px solid var(--gray-200); background: var(--gray-50); flex-shrink: 0; }\n    .order-summary { background: var(--gray-50); border-radius: 12px; padding: var(--spacing-4); margin-bottom: var(--spacing-4); }\n    .summary-line { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: var(--font-size-sm); }\n    .summary-line.total { border-top: 1px solid var(--gray-200); padding-top: 8px; font-size: var(--font-size-base); }\n    .footer-buttons { display: flex; flex-direction: column; gap: 8px; }\n    .order-btn { width: 100%; padding: 12px; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; }\n    .checkout-btn { background: var(--secondary-color); color: white; }\n    .legacy-btn { background: var(--whatsapp-color); color: white; }\n    @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }\n    @media (max-width: 768px) { .cart-panel { width: 100%; } }\n</style>\n","<script>\n    import Header from '$lib/components/Header.svelte';\n    import Footer from '$lib/components/Footer.svelte';\n    import Cart from '$lib/components/Cart/Cart.svelte';\n    import WhatsAppFloat from '$lib/components/WhatsAppFloat.svelte';\n    import LoggerService from '$lib/services/LoggerService';\n    import { onMount } from 'svelte';\n    import { page } from '$app/stores';\n    import { cart } from '$lib/stores/cart';\n    import '../app.css';\n\n    onMount(() => {\n        cart.init();\n        \n        // Glow Tracker: Global CSS variables for cursor tracking\n        const handleMouseMove = (e) => {\n            document.body.style.setProperty('--mouse-x', `${e.clientX}px`);\n            document.body.style.setProperty('--mouse-y', `${e.clientY}px`);\n        };\n        window.addEventListener('mousemove', handleMouseMove, { passive: true });\n\n        window.onerror = (message, source, lineno, colno, error) => {\n            LoggerService.error('Global Client Error', {\n                message,\n                source,\n                lineno,\n                colno,\n                error: error?.stack\n            });\n            return false;\n        };\n\n        window.onunhandledrejection = (event) => {\n            LoggerService.error('Unhandled Promise Rejection', {\n                reason: event.reason\n            });\n        };\n\n        LoggerService.info('App layout mounted successfully');\n    });\n\n    // SEO Structured Data (JSON-LD)\n    $: structuredData = {\n        \"@context\": \"https://schema.org\",\n        \"@type\": \"Restaurant\",\n        \"name\": \"Lanche da Si\",\n        \"image\": \"https://www.lanchedasi.com.br/assets/logo.png\",\n        \"@id\": \"https://www.lanchedasi.com.br\",\n        \"url\": \"https://www.lanchedasi.com.br\",\n        \"telephone\": \"+5592984570146\",\n        \"address\": {\n            \"@type\": \"PostalAddress\",\n            \"streetAddress\": \"Rua das Lanchonetes, 123\",\n            \"addressLocality\": \"Manaus\",\n            \"addressRegion\": \"AM\",\n            \"postalCode\": \"69000-000\",\n            \"addressCountry\": \"BR\"\n        },\n        \"geo\": {\n            \"@type\": \"GeoCoordinates\",\n            \"latitude\": -3.1190275,\n            \"longitude\": -60.0217314\n        },\n        \"openingHoursSpecification\": {\n            \"@type\": \"OpeningHoursSpecification\",\n            \"dayOfWeek\": [\n                \"Monday\",\n                \"Tuesday\",\n                \"Wednesday\",\n                \"Thursday\",\n                \"Friday\",\n                \"Saturday\",\n                \"Sunday\"\n            ],\n            \"opens\": \"18:00\",\n            \"closes\": \"23:59\"\n        },\n        \"servesCuisine\": \"Fast Food, Brazilian\",\n        \"priceRange\": \"$$\"\n    };\n</script>\n\n<svelte:head>\n    <!-- Preconnect to font origins -->\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n    <link rel=\"preconnect\" href=\"https://cdnjs.cloudflare.com\" />\n\n    <!-- Font Awesome -->\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\" rel=\"stylesheet\" media=\"print\" onload=\"this.media='all'\" />\n    <noscript><link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css\" rel=\"stylesheet\" /></noscript>\n\n    <!-- Inter font with display=swap for fast text rendering -->\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap\" rel=\"stylesheet\" />\n\n    <!-- SEO JSON-LD -->\n    {@html `<script type=\"application/ld+json\">${JSON.stringify(structuredData)}</script>`}\n</svelte:head>\n\n<a href=\"#conteudo-principal\" class=\"skip-link\">Pular para o conte√∫do principal</a>\n<Header />\n<main id=\"conteudo-principal\" aria-label=\"Conte√∫do principal\">\n    <slot />\n</main>\n<Footer />\n<Cart />\n<WhatsAppFloat />\n"],"names":["subscribe","cart"],"mappings":"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"}