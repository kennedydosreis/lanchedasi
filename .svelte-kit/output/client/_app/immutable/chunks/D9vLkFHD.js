(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"a9a6c365e5af544cf116d5add4ce50f9371f8788"};var e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="548f03fc-9b0d-4b57-8826-70e6a1b0ff4a",t._sentryDebugIdIdentifier="sentry-dbid-548f03fc-9b0d-4b57-8826-70e6a1b0ff4a")}catch{}})();const _=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,h=globalThis,H="10.39.0";function F(){return it(h),h}function it(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||H,e[H]=e[H]||{}}function ot(t,e,n=h){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[H]=r[H]||{};return s[t]||(s[t]=e())}const Vr=["debug","info","warn","error","log","assert","trace"],Fe="Sentry Logger ",vt={};function Tt(t){if(!("console"in h))return t();const e=h.console,n={},r=Object.keys(vt);r.forEach(s=>{const i=vt[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function je(){Nt().enabled=!0}function Ue(){Nt().enabled=!1}function re(){return Nt().enabled}function Ge(...t){At("log",...t)}function Be(...t){At("warn",...t)}function He(...t){At("error",...t)}function At(t,...e){_&&re()&&Tt(()=>{h.console[t](`${Fe}[${t}]:`,...e)})}function Nt(){return _?ot("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const g={enable:je,disable:Ue,isEnabled:re,log:Ge,warn:Be,error:He},se=50,Ye="?",Lt=/\(error: (.*)\)/,$t=/captureMessage|captureException/;function Ve(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const u=Lt.test(c)?c.replace(Lt,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of e){const f=d(u);if(f){i.push(f);break}}if(i.length>=se+s)break}}return ze(i.slice(s))}}function zr(t){return Array.isArray(t)?Ve(...t):t}function ze(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(q(e).function||"")&&e.pop(),e.reverse(),$t.test(q(e).function||"")&&(e.pop(),$t.test(q(e).function||"")&&e.pop()),e.slice(0,se).map(n=>({...n,filename:n.filename||q(e).filename,function:n.function||Ye}))}function q(t){return t[t.length-1]||{}}const ft="<anonymous>";function We(t){try{return!t||typeof t!="function"?ft:t.name||ft}catch{return ft}}function Wr(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function ie(t){return"__v_isVNode"in t&&t.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const oe=Object.prototype.toString;function Je(t){switch(oe.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return J(t,Error)}}function j(t,e){return oe.call(t)===`[object ${e}]`}function Jr(t){return j(t,"ErrorEvent")}function Kr(t){return j(t,"DOMError")}function Xr(t){return j(t,"DOMException")}function Q(t){return j(t,"String")}function Ke(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Xe(t){return t===null||Ke(t)||typeof t!="object"&&typeof t!="function"}function ae(t){return j(t,"Object")}function qe(t){return typeof Event<"u"&&J(t,Event)}function Ze(t){return typeof Element<"u"&&J(t,Element)}function Qe(t){return j(t,"RegExp")}function W(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function tn(t){return ae(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function J(t,e){try{return t instanceof e}catch{return!1}}function ce(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue||t.__v_isVNode))}function qr(t){return typeof Request<"u"&&J(t,Request)}const Rt=h,en=80;function nn(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(e)?e:e.keyAttrs,f=!Array.isArray(e)&&e.maxStringLength||en;for(;n&&i++<r&&(u=rn(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=f));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function rn(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(Rt.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=e!=null&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Q(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Zr(){try{return Rt.document.location.href}catch{return""}}function Qr(t){if(!Rt.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function ts(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&sn(s,r);try{t[e]=s}catch{_&&g.log(`Failed to replace method "${e}" in object`,t)}}function k(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{_&&g.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function sn(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,k(t,"__sentry_original__",e)}catch{}}function es(t){return t.__sentry_original__}function ue(t){if(Je(t))return{message:t.message,name:t.name,stack:t.stack,...jt(t)};if(qe(t)){const e={type:t.type,target:Ft(t.target),currentTarget:Ft(t.currentTarget),...jt(t)};return typeof CustomEvent<"u"&&J(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Ft(t){try{return Ze(t)?nn(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function jt(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function ns(t){const e=Object.keys(ue(t));return e.sort(),e[0]?e.join(", "):"[object has no keys]"}function rs(t){let e;switch(!0){case t==null:e=new String(t);break;case(typeof t=="symbol"||typeof t=="bigint"):e=Object(t);break;case Xe(t):e=new t.constructor(t);break;default:e=t;break}return e}let v;function K(t){if(v!==void 0)return v?v(t):t();const e=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=h;return e in n&&typeof n[e]=="function"?(v=n[e],v(t)):(v=null,t())}function x(){return K(()=>Math.random())}function fe(){return K(()=>Date.now())}function gt(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function ss(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{ce(s)?n.push(ie(s)):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function Z(t,e,n=!1){return Q(t)?Qe(e)?e.test(t):Q(e)?n?t===e:t.includes(e):!1:!1}function is(t,e=[],n=!1){return e.some(r=>Z(t,r,n))}function on(){const t=h;return t.crypto||t.msCrypto}let dt;function an(){return x()*16}function D(t=on()){try{if(t!=null&&t.randomUUID)return K(()=>t.randomUUID()).replace(/-/g,"")}catch{}return dt||(dt="10000000100040008000"+1e11),dt.replace(/[018]/g,e=>(e^(an()&15)>>e/4).toString(16))}function de(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function os(t){const{message:e,event_id:n}=t;if(e)return e;const r=de(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function as(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function cn(t,e){const n=de(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s==null?void 0:s.data,...e.data};n.mechanism.data=i}}function cs(t){if(un(t))return!0;try{k(t,"__sentry_captured__",!0)}catch{}return!1}function un(t){try{return t.__sentry_captured__}catch{}}const pe=1e3;function Ct(){return fe()/pe}function fn(){const{performance:t}=h;if(!(t!=null&&t.now)||!t.timeOrigin)return Ct;const e=t.timeOrigin;return()=>(e+K(()=>t.now()))/pe}let Ut;function Y(){return(Ut??(Ut=fn()))()}let pt=null;function dn(){var o;const{performance:t}=h;if(!(t!=null&&t.now))return;const e=3e5,n=K(()=>t.now()),r=fe(),s=t.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<e)return s;const i=(o=t.timing)==null?void 0:o.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<e?i:r-n}function us(){return pt===null&&(pt=dn()),pt}function pn(t){const e=Y(),n={sid:D(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>_n(n)};return t&&at(n,t),n}function at(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Y(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:D()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function ln(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),at(t,n)}function _n(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function ct(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=ct(r[s],e[s],n-1));return r}function P(){return D()}function U(){return D().substring(16)}const mt="_sentrySpan";function tt(t,e){e?k(t,mt,e):delete t[mt]}function et(t){return t[mt]}const gn=100;class E{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:P(),sampleRand:x()}}clone(){const e=new E;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._attributes={...this._attributes},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,e._conversationId=this._conversationId,tt(e,et(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&at(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(e){return this._conversationId=e||void 0,this._notifyScopeListeners(),this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this.setTags({[e]:n})}setAttributes(e){return this._attributes={...this._attributes,...e},this._notifyScopeListeners(),this}setAttribute(e,n){return this.setAttributes({[e]:n})}removeAttribute(e){return e in this._attributes&&(delete this._attributes[e],this._notifyScopeListeners()),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof E?n.getScopeData():ae(n)?e:void 0,{tags:s,attributes:i,extra:o,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:f,conversationId:l}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),f&&(this._propagationContext=f),l&&(this._conversationId=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,tt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:P(),sampleRand:x()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var i;const r=typeof n=="number"?n:gn;if(r<=0)return this;const s={timestamp:Ct(),...e,message:e.message?gt(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:et(this),conversationId:this._conversationId}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=ct(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||D();if(!this._client)return _&&g.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=(r==null?void 0:r.event_id)||D();if(!this._client)return _&&g.warn("No client configured on scope - will not capture message!"),s;const i=(r==null?void 0:r.syntheticException)??new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=e.event_id||(n==null?void 0:n.event_id)||D();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(_&&g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function mn(){return ot("defaultCurrentScope",()=>new E)}function hn(){return ot("defaultIsolationScope",()=>new E)}class Sn{constructor(e,n){let r;e?r=e:r=new E;let s;n?s=n:s=new E,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return W(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function $(){const t=F(),e=it(t);return e.stack=e.stack||new Sn(mn(),hn())}function yn(t){return $().withScope(t)}function En(t,e){const n=$();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Gt(t){return $().withScope(()=>t($().getIsolationScope()))}function bn(){return{withIsolationScope:Gt,withScope:yn,withSetScope:En,withSetIsolationScope:(t,e)=>Gt(e),getCurrentScope:()=>$().getScope(),getIsolationScope:()=>$().getIsolationScope()}}function X(t){const e=it(t);return e.acs?e.acs:bn()}function N(){const t=F();return X(t).getCurrentScope()}function G(){const t=F();return X(t).getIsolationScope()}function In(){return ot("globalScope",()=>new E)}function Dt(...t){const e=F(),n=X(e);if(t.length===2){const[r,s]=t;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(t[0])}function R(){return N().getClient()}function fs(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,i={trace_id:n,span_id:s||U()};return r&&(i.parent_span_id=r),i}const nt="sentry.source",le="sentry.sample_rate",Tn="sentry.previous_trace_sample_rate",ht="sentry.op",St="sentry.origin",ds="sentry.idle_span_finish_reason",_e="sentry.measurement_unit",ge="sentry.measurement_value",Bt="sentry.custom_span_name",An="sentry.profile_id",Nn="sentry.exclusive_time",ps="sentry.link.type",ls="gen_ai.conversation.id",Rn=0,me=1,S=2;function Cn(t){if(t<400&&t>=100)return{code:me};if(t>=400&&t<500)switch(t){case 401:return{code:S,message:"unauthenticated"};case 403:return{code:S,message:"permission_denied"};case 404:return{code:S,message:"not_found"};case 409:return{code:S,message:"already_exists"};case 413:return{code:S,message:"failed_precondition"};case 429:return{code:S,message:"resource_exhausted"};case 499:return{code:S,message:"cancelled"};default:return{code:S,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:S,message:"unimplemented"};case 503:return{code:S,message:"unavailable"};case 504:return{code:S,message:"deadline_exceeded"};default:return{code:S,message:"internal_error"}}return{code:S,message:"internal_error"}}function _s(t,e){t.setAttribute("http.response.status_code",e);const n=Cn(e);n.message!=="unknown_error"&&t.setStatus(n)}const he="_sentryScope",Se="_sentryIsolationScope";function Dn(t){try{const e=h.WeakRef;if(typeof e=="function")return new e(t)}catch{}return t}function kn(t){if(t){if(typeof t=="object"&&"deref"in t&&typeof t.deref=="function")try{return t.deref()}catch{return}return t}}function xn(t,e,n){t&&(k(t,Se,Dn(n)),k(t,he,e))}function rt(t){const e=t;return{scope:e[he],isolationScope:kn(e[Se])}}const ye="sentry-",On=/^sentry-/,Pn=8192;function Ee(t){const e=Mn(t);if(!e)return;const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(On)){const o=s.slice(ye.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function gs(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,s])=>(s&&(n[`${ye}${r}`]=s),n),{});return wn(e)}function Mn(t){if(!(!t||!Q(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Ht(n);return Object.entries(r).forEach(([s,i])=>{e[s]=i}),e},{}):Ht(t)}function Ht(t){return t.split(",").map(e=>{const n=e.indexOf("=");if(n===-1)return[];const r=e.slice(0,n),s=e.slice(n+1);return[r,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}function wn(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${e},${i}`;return o.length>Pn?(_&&g.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const vn=/^o(\d+)\./,Ln=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function $n(t){return t==="http"||t==="https"}function kt(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Fn(t){const e=Ln.exec(t);if(!e){Tt(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i="",o="",a=""]=e.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const f=u.match(/^\d+/);f&&(u=f[0])}return be({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function be(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function jn(t){if(!_)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(g.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?$n(r)?e&&isNaN(parseInt(e,10))?(g.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(g.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(g.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Un(t){const e=t.match(vn);return e==null?void 0:e[1]}function Gn(t){const e=t.getOptions(),{host:n}=t.getDsn()||{};let r;return e.orgId?r=String(e.orgId):n&&(r=Un(n)),r}function ms(t){const e=typeof t=="string"?Fn(t):be(t);if(!(!e||!jn(e)))return e}function st(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Bn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Hn(t){if(!t)return;const e=t.match(Bn);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function hs(t,e){const n=Hn(t),r=Ee(e);if(!(n!=null&&n.traceId))return{traceId:P(),sampleRand:x()};const s=zn(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function Yn(t=P(),e=U(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function Vn(t=P(),e=U(),n){return`00-${t}-${e}-${n?"01":"00"}`}function zn(t,e){const n=st(e==null?void 0:e.sample_rand);if(n!==void 0)return n;const r=st(e==null?void 0:e.sample_rate);return r&&(t==null?void 0:t.parentSampled)!==void 0?t.parentSampled?x()*r:r+x()*(1-r):x()}const Ie=0,xt=1;let Yt=!1;function Wn(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=y(t);return{parent_span_id:i,span_id:e,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function Jn(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:y(t).parent_span_id,i=rt(t).scope,o=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||U():e;return{parent_span_id:s,span_id:o,trace_id:n}}function Ss(t){const{traceId:e,spanId:n}=t.spanContext(),r=M(t);return Yn(e,n,r)}function ys(t){const{traceId:e,spanId:n}=t.spanContext(),r=M(t);return Vn(e,n,r)}function Te(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:e,trace_id:n,sampled:r===xt,attributes:i,...s}))}function L(t){return typeof t=="number"?Vt(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Vt(t.getTime()):Y()}function Vt(t){return t>9999999999?t/1e3:t}function y(t){var r;if(Xn(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(Kn(t)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:u}=t,d="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?(r=t.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:e,trace_id:n,data:s,description:o,parent_span_id:d,start_timestamp:L(i),timestamp:L(a)||void 0,status:Ae(c),op:s[ht],origin:s[St],links:Te(u)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function Kn(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Xn(t){return typeof t.getSpanJSON=="function"}function M(t){const{traceFlags:e}=t.spanContext();return e===xt}function Ae(t){if(!(!t||t.code===Rn))return t.code===me?"ok":t.message||"internal_error"}const O="_sentryChildSpans",yt="_sentryRootSpan";function Ne(t,e){const n=t[yt]||t;k(e,yt,n),t[O]?t[O].add(e):k(t,O,new Set([e]))}function Es(t,e){t[O]&&t[O].delete(e)}function qn(t){const e=new Set;function n(r){if(!e.has(r)&&M(r)){e.add(r);const s=r[O]?Array.from(r[O]):[];for(const i of s)n(i)}}return n(t),Array.from(e)}function A(t){return t[yt]||t}function Zn(){const t=F(),e=X(t);return e.getActiveSpan?e.getActiveSpan():et(N())}function Qn(){Yt||(Tt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Yt=!0)}function Ot(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=R())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}function zt(t){g.log(`Ignoring span ${t.op} - ${t.description} because it matches \`ignoreSpans\`.`)}function tr(t,e){if(!(e!=null&&e.length)||!t.description)return!1;for(const n of e){if(er(n)){if(Z(t.description,n))return _&&zt(t),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Z(t.description,n.name):!0,s=n.op?t.op&&Z(t.op,n.op):!0;if(r&&s)return _&&zt(t),!0}return!1}function bs(t,e){const n=e.parent_span_id,r=e.span_id;if(n)for(const s of t)s.parent_span_id===r&&(s.parent_span_id=n)}function er(t){return typeof t=="string"||t instanceof RegExp}const Re="production",Ce="_frozenDsc";function lt(t,e){k(t,Ce,e)}function De(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||Re,release:n.release,public_key:r,trace_id:t,org_id:Gn(e)};return e.emit("createDsc",s),s}function Is(t,e){const n=e.getPropagationContext();return n.dsc||De(n.traceId,t)}function V(t){var m;const e=R();if(!e)return{};const n=A(t),r=y(n),s=r.data,i=n.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[le]??s[Tn];function a(b){return(typeof o=="number"||typeof o=="string")&&(b.sample_rate=`${o}`),b}const c=n[Ce];if(c)return a(c);const u=i==null?void 0:i.get("sentry.dsc"),d=u&&Ee(u);if(d)return a(d);const f=De(t.spanContext().traceId,e),l=s[nt],p=r.description;return l!=="url"&&p&&(f.transaction=p),Ot()&&(f.sampled=String(M(n)),f.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((m=rt(n).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(f),e.emit("createDsc",f,n),f}class ut{constructor(e={}){this._traceId=e.traceId||P(),this._spanId=e.spanId||U()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Ie}}end(e){}setAttribute(e,n){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,n,r){return this}addLink(e){return this}addLinks(e){return this}recordException(e,n){}}function T(t,e=100,n=1/0){try{return Et("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function nr(t,e=3,n=100*1024){const r=T(t,e);return or(r)>n?nr(t,e-1,n):r}function Et(t,e,n=1/0,r=1/0,s=ar()){const[i,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=rr(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Et("",p,c-1,r,s)}catch{}const d=Array.isArray(e)?[]:{};let f=0;const l=ue(e);for(const p in l){if(!Object.prototype.hasOwnProperty.call(l,p))continue;if(f>=r){d[p]="[MaxProperties ~]";break}const m=l[p];d[p]=Et(p,m,c-1,r,s),f++}return o(e),d}function rr(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(ce(e))return ie(e);if(tn(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${We(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=sr(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function sr(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function ir(t){return~-encodeURI(t).split(/%..|./).length}function or(t){return ir(JSON.stringify(t))}function ar(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function Pt(t,e=[]){return[t,e]}function Ts(t,e){const[n,r]=t;return[n,[...r,e]]}function cr(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function As(t,e){return cr(t,(n,r)=>e.includes(r))}function bt(t){const e=it(h);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function Ns(t){const[e,n]=t;let r=JSON.stringify(e);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[bt(r),i]:r.push(typeof i=="string"?bt(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(T(a))}s(c)}}return typeof r=="string"?r:ur(r)}function ur(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function fr(t){return[{type:"span"},t]}function Rs(t){const e=typeof t.data=="string"?bt(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const dr={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Cs(t){return dr[t]}function ke(t){if(!(t!=null&&t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function pr(t,e,n,r){var i;const s=(i=t.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:kt(r)},...s&&{trace:s}}}function lr(t,e){var r,s,i,o;if(!e)return t;const n=t.sdk||{};return t.sdk={...n,name:n.name||e.name,version:n.version||e.version,integrations:[...((r=t.sdk)==null?void 0:r.integrations)||[],...e.integrations||[]],packages:[...((s=t.sdk)==null?void 0:s.packages)||[],...e.packages||[]],settings:(i=t.sdk)!=null&&i.settings||e.settings?{...(o=t.sdk)==null?void 0:o.settings,...e.settings}:void 0},t}function Ds(t,e,n,r){const s=ke(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:kt(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Pt(i,[o])}function ks(t,e,n,r){const s=ke(n),i=t.type&&t.type!=="replay_event"?t.type:"event";lr(t,n==null?void 0:n.sdk);const o=pr(t,s,r,e);return delete t.sdkProcessingMetadata,Pt(o,[[{type:i},t]])}function _r(t,e){function n(p){return!!p.trace_id&&!!p.public_key}const r=V(t[0]),s=e==null?void 0:e.getDsn(),i=e==null?void 0:e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:kt(s)}},{beforeSendSpan:a,ignoreSpans:c}=(e==null?void 0:e.getOptions())||{},u=c!=null&&c.length?t.filter(p=>!tr(y(p),c)):t,d=t.length-u.length;d&&(e==null||e.recordDroppedEvent("before_send","span",d));const f=a?p=>{const m=y(p),b=a(m);return b||(Qn(),m)}:y,l=[];for(const p of u){const m=f(p);m&&l.push(fr(m))}return Pt(o,l)}function gr(t){if(!_)return;const{description:e="< unknown name >",op:n="< unknown op >",parent_span_id:r}=y(t),{spanId:s}=t.spanContext(),i=M(t),o=A(t),a=o===t,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${e}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:f}=y(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),f&&u.push(`root description: ${f}`)}g.log(`${c}
  ${u.join(`
  `)}`)}function mr(t){if(!_)return;const{description:e="< unknown name >",op:n="< unknown op >"}=y(t),{spanId:r}=t.spanContext(),i=A(t)===t,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${e}" with ID ${r}`;g.log(o)}function xs(t,e,n,r=Zn()){const s=r&&A(r);s&&(_&&g.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${n}`),s.addEvent(t,{[ge]:e,[_e]:n}))}function Wt(t){if(!t||t.length===0)return;const e={};return t.forEach(n=>{const r=n.attributes||{},s=r[_e],i=r[ge];typeof s=="string"&&typeof i=="number"&&(e[n.name]={value:i,unit:s})}),e}const Jt=1e3;class Mt{constructor(e={}){this._traceId=e.traceId||P(),this._spanId=e.spanId||U(),this._startTime=e.startTimestamp||Y(),this._links=e.links,this._attributes={},this.setAttributes({[St]:"manual",[ht]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,n){}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?xt:Ie}}setAttribute(e,n){return n===void 0?delete this._attributes[e]:this._attributes[e]=n,this}setAttributes(e){return Object.keys(e).forEach(n=>this.setAttribute(n,e[n])),this}updateStartTime(e){this._startTime=L(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(nt,"custom"),this}end(e){this._endTime||(this._endTime=L(e),mr(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[ht],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ae(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[St],profile_id:this._attributes[An],exclusive_time:this._attributes[Nn],measurements:Wt(this._events),is_segment:this._isStandaloneSpan&&A(this)===this||void 0,segment_id:this._isStandaloneSpan?A(this).spanContext().spanId:void 0,links:Te(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,n,r){_&&g.log("[Tracing] Adding an event to span:",e);const s=Kt(n)?n:r||Y(),i=Kt(n)?{}:n||{},o={name:e,time:L(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=R();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===A(this)))return;if(this._isStandaloneSpan){this._sampled?Sr(_r([this],e)):(_&&g.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(rt(this).scope||N()).captureEvent(r)}_convertSpanToTransaction(){var d;if(!Xt(y(this)))return;this._name||(_&&g.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:n}=rt(this),r=(d=e==null?void 0:e.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const i=qn(this).filter(f=>f!==this&&!hr(f)).map(f=>y(f)).filter(Xt),o=this._attributes[nt];delete this._attributes[Bt],i.forEach(f=>{delete f.data[Bt]});const a={contexts:{trace:Wn(this)},spans:i.length>Jt?i.sort((f,l)=>f.start_timestamp-l.start_timestamp).slice(0,Jt):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:n,dynamicSamplingContext:V(this)},request:r,...o&&{transaction_info:{source:o}}},c=Wt(this._events);return c&&Object.keys(c).length&&(_&&g.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Kt(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Xt(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function hr(t){return t instanceof Mt&&t.isStandaloneSpan()}function Sr(t){const e=R();if(!e)return;const n=t[1];if(!n||n.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function yr(t,e,n=()=>{},r=()=>{}){let s;try{s=t()}catch(i){throw e(i),n(),i}return Er(s,e,n,r)}function Er(t,e,n,r){return W(t)?t.then(s=>(n(),r(s),s),s=>{throw e(s),n(),s}):(n(),r(t),t)}function br(t,e,n){if(!Ot(t))return[!1];let r,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:a=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):a}),r=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,r=!0);const i=st(s);if(i===void 0)return _&&g.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return _&&g.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||_&&g.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const xe="__SENTRY_SUPPRESS_TRACING__";function Os(t,e){const n=wt();if(n.startSpan)return n.startSpan(t,e);const r=Me(t),{forceTransaction:s,parentSpan:i,scope:o}=t,a=o==null?void 0:o.clone();return Dt(a,()=>Tr(i)(()=>{const u=N(),d=we(u,i),l=t.onlyIfParent&&!d?new ut:Pe({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return tt(u,l),yr(()=>e(l),()=>{const{status:p}=y(l);l.isRecording()&&(!p||p==="ok")&&l.setStatus({code:S,message:"internal_error"})},()=>{l.end()})}))}function Ps(t){const e=wt();if(e.startInactiveSpan)return e.startInactiveSpan(t);const n=Me(t),{forceTransaction:r,parentSpan:s}=t;return(t.scope?o=>Dt(t.scope,o):s!==void 0?o=>Oe(s,o):o=>o())(()=>{const o=N(),a=we(o,s);return t.onlyIfParent&&!a?new ut:Pe({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function Oe(t,e){const n=wt();return n.withActiveSpan?n.withActiveSpan(t,e):Dt(r=>(tt(r,t||void 0),e(r)))}function Pe({parentSpan:t,spanArguments:e,forceTransaction:n,scope:r}){if(!Ot()){const o=new ut;if(n||!t){const a={sampled:"false",sample_rate:"0",transaction:e.name,...V(o)};lt(o,a)}return o}const s=G();let i;if(t&&!n)i=Ir(t,r,e),Ne(t,i);else if(t){const o=V(t),{traceId:a,spanId:c}=t.spanContext(),u=M(t);i=qt({traceId:a,parentSpanId:c,...e},r,u),lt(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=qt({traceId:o,parentSpanId:c,...e},r,u),a&&lt(i,a)}return gr(i),xn(i,r,s),i}function Me(t){const n={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const r={...n};return r.startTimestamp=L(t.startTime),delete r.startTime,r}return n}function wt(){const t=F();return X(t)}function qt(t,e,n){var m;const r=R(),s=(r==null?void 0:r.getOptions())||{},{name:i=""}=t,o={spanAttributes:{...t.attributes},spanName:i,parentSampled:n};r==null||r.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=e.getPropagationContext(),[d,f,l]=e.getScopeData().sdkProcessingMetadata[xe]?[!1]:br(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:st((m=u.dsc)==null?void 0:m.sample_rate)},u.sampleRand),p=new Mt({...t,attributes:{[nt]:"custom",[le]:f!==void 0&&l?f:void 0,...c},sampled:d});return!d&&r&&(_&&g.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function Ir(t,e,n){const{spanId:r,traceId:s}=t.spanContext(),i=e.getScopeData().sdkProcessingMetadata[xe]?!1:M(t),o=i?new Mt({...n,parentSpanId:r,traceId:s,sampled:i}):new ut({traceId:s});Ne(t,o);const a=R();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function we(t,e){if(e)return e;if(e===null)return;const n=et(t);if(!n)return;const r=R();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?A(n):n}function Tr(t){return t!==void 0?e=>Oe(t,e):e=>e()}const _t=0,Zt=1,Qt=2;function ve(t){return new z(e=>{e(t)})}function Ar(t){return new z((e,n)=>{n(t)})}class z{constructor(e){this._state=_t,this._handlers=[],this._runExecutor(e)}then(e,n){return new z((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new z((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===_t)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===Zt&&n[1](this._value),this._state===Qt&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(i,o)=>{if(this._state===_t){if(W(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(Zt,i)},s=i=>{n(Qt,i)};try{e(r,s)}catch(i){s(i)}}}function Nr(t,e,n,r=0){try{const s=It(e,n,t,r);return W(s)?s:ve(s)}catch(s){return Ar(s)}}function It(t,e,n,r){const s=n[r];if(!t||!s)return t;const i=s({...t},e);return _&&i===null&&g.log(`Event processor "${s.id||"?"}" dropped event`),W(i)?i.then(o=>It(o,e,n,r+1)):It(i,e,n,r+1)}let I,te,ee,C;function Rr(t){const e=h._sentryDebugIds,n=h._debugIds;if(!e&&!n)return{};const r=e?Object.keys(e):[],s=n?Object.keys(n):[];if(C&&r.length===te&&s.length===ee)return C;te=r.length,ee=s.length,C={},I||(I={});const i=(o,a)=>{for(const c of o){const u=a[c],d=I==null?void 0:I[c];if(d&&C&&u)C[d[0]]=u,I&&(I[c]=[d[0],u]);else if(u){const f=t(c);for(let l=f.length-1;l>=0;l--){const p=f[l],m=p==null?void 0:p.filename;if(m&&C&&I){C[m]=u,I[c]=[m,u];break}}}}};return e&&i(r,e),n&&i(s,n),C}function Cr(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;kr(t,e),r&&Pr(t,r),Mr(t,n),xr(t,s),Or(t,i)}function ne(t,e){const{extra:n,tags:r,attributes:s,user:i,contexts:o,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:f,attachments:l,propagationContext:p,transactionName:m,span:b}=e;B(t,"extra",n),B(t,"tags",r),B(t,"attributes",s),B(t,"user",i),B(t,"contexts",o),t.sdkProcessingMetadata=ct(t.sdkProcessingMetadata,c,2),a&&(t.level=a),m&&(t.transactionName=m),b&&(t.span=b),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),d.length&&(t.fingerprint=[...t.fingerprint,...d]),f.length&&(t.eventProcessors=[...t.eventProcessors,...f]),l.length&&(t.attachments=[...t.attachments,...l]),t.propagationContext={...t.propagationContext,...p}}function B(t,e,n){t[e]=ct(t[e],n,1)}function Dr(t,e){const n=In().getScopeData();return t&&ne(n,t.getScopeData()),e&&ne(n,e.getScopeData()),n}function kr(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function xr(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function Or(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Pr(t,e){t.contexts={trace:Jn(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:V(e),...t.sdkProcessingMetadata};const n=A(e),r=y(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function Mr(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function Ms(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||D(),timestamp:e.timestamp||Ct()},u=n.integrations||t.integrations.map(w=>w.name);wr(c,t),$r(c,u),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&vr(c,t.stackParser);const d=jr(r,n.captureContext);n.mechanism&&cn(c,n.mechanism);const f=s?s.getEventProcessors():[],l=Dr(i,d),p=[...n.attachments||[],...l.attachments];p.length&&(n.attachments=p),Cr(c,l);const m=[...f,...l.eventProcessors];return(n.data&&n.data.__sentry__===!0?ve(c):Nr(m,c,n)).then(w=>(w&&Lr(w),typeof o=="number"&&o>0?Fr(w,o,a):w))}function wr(t,e){var a,c;const{environment:n,release:r,dist:s,maxValueLength:i}=e;t.environment=t.environment||n||Re,!t.release&&r&&(t.release=r),!t.dist&&s&&(t.dist=s);const o=t.request;o!=null&&o.url&&i&&(o.url=gt(o.url,i)),i&&((c=(a=t.exception)==null?void 0:a.values)==null||c.forEach(u=>{u.value&&(u.value=gt(u.value,i))}))}function vr(t,e){var r,s;const n=Rr(e);(s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function Lr(t){var r,s;const e={};if((s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?e[c.abs_path]=c.debug_id:c.filename&&(e[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([i,o])=>{n.push({type:"sourcemap",code_file:i,debug_id:o})})}function $r(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Fr(t,e,n){var s,i;if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(o=>({...o,...o.data&&{data:T(o.data,e,n)}}))},...t.user&&{user:T(t.user,e,n)},...t.contexts&&{contexts:T(t.contexts,e,n)},...t.extra&&{extra:T(t.extra,e,n)}};return(s=t.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=T(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(o=>({...o,...o.data&&{data:T(o.data,e,n)}}))),(i=t.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=T(t.contexts.flags,3,n)),r}function jr(t,e){if(!e)return t;const n=t?t.clone():new E;return n.update(e),n}function Ur(t){if(t)return Gr(t)?{captureContext:t}:Hr(t)?{captureContext:t}:t}function Gr(t){return t instanceof E||typeof t=="function"}const Br=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Hr(t){return Object.keys(t).some(e=>Br.includes(e))}function ws(t,e){return N().captureException(t,Ur(e))}function vs(t,e){return N().captureEvent(t,e)}function Ls(t,e){G().setContext(t,e)}function $s(){const t=R();return(t==null?void 0:t.getOptions().enabled)!==!1&&!!(t!=null&&t.getTransport())}function Fs(t){G().addEventProcessor(t)}function js(t){const e=G(),n=N(),{userAgent:r}=h.navigator||{},s=pn({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),i=e.getSession();return(i==null?void 0:i.status)==="ok"&&at(i,{status:"exited"}),Le(),e.setSession(s),s}function Le(){const t=G(),n=N().getSession()||t.getSession();n&&ln(n),$e(),t.setSession()}function $e(){const t=G(),e=R(),n=t.getSession();n&&e&&e.captureSession(n)}function Us(t=!1){if(t){Le();return}$e()}export{Ms as $,Ps as A,kt as B,Pt as C,_ as D,ot as E,ve as F,h as G,Ar as H,fe as I,cr as J,Ns as K,As as L,Cs as M,Ct as N,Nn as O,An as P,ms as Q,D as R,nt as S,cs as T,at as U,ks as V,Ts as W,Rs as X,Re as Y,Ds as Z,tt as _,k as a,Fs as a$,fs as a0,Is as a1,G as a2,x as a3,Ke as a4,Xe as a5,st as a6,Qn as a7,ct as a8,bs as a9,ht as aA,Zr as aB,sn as aC,Dt as aD,as as aE,cn as aF,Jr as aG,Kr as aH,Xr as aI,qe as aJ,nr as aK,ns as aL,Oe as aM,us as aN,nn as aO,ge as aP,_e as aQ,xs as aR,Qr as aS,Q as aT,Ve as aU,Ye as aV,ss as aW,js as aX,Us as aY,vs as aZ,zr as a_,W as aa,ae as ab,Je as ac,Tt as ad,H as ae,$s as af,F as ag,X as ah,Ss as ai,gs as aj,Bn as ak,ys as al,Yn as am,Vn as an,es as ao,os as ap,is as aq,J as ar,Vr as as,ts as at,vt as au,Wr as av,ls as aw,_s as ax,qr as ay,ye as az,St as b,Ls as b0,T as b1,pr as b2,ke as b3,Tn as b4,ps as b5,le as b6,U as b7,P as b8,hs as b9,M as ba,ws as c,g as d,Zn as e,A as f,We as g,yr as h,S as i,R as j,Ot as k,ut as l,V as m,lt as n,rs as o,N as p,L as q,qn as r,Os as s,Y as t,y as u,tr as v,ds as w,me as x,Es as y,Mt as z};
