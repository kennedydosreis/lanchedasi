{"version":3,"file":"BMaO7_QC.js","sources":["../../../../../../src/lib/utils/loadMenu.js"],"sourcesContent":["/**\n * Menu data loader with fallback mechanism\n * Fetches menu data from external JSON file with error handling\n */\n\nimport { dev } from '$app/environment';\nimport { base } from '$app/paths';\n\nlet cachedMenuData = null;\n\n/**\n * Load menu data from JSON file\n * @returns {Promise<Object>} Menu data object\n */\nexport async function loadMenuData() {\n    // Return cached data if available (client-side only)\n    if (typeof window !== 'undefined' && cachedMenuData) {\n        return cachedMenuData;\n    }\n\n    try {\n        // Construct URL with base path support for GitHub Pages\n        const url = `${base}/data/menu.json`;\n        \n        const response = await fetch(url, {\n            headers: {\n                'Content-Type': 'application/json',\n            },\n        });\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n        \n        // Validate basic structure\n        if (!data || typeof data !== 'object') {\n            throw new Error('Invalid menu data structure');\n        }\n\n        // Cache the data (client-side)\n        if (typeof window !== 'undefined') {\n            cachedMenuData = data;\n        }\n\n        return data;\n    } catch (error) {\n        console.error('Error loading menu data:', error);\n        \n        // Fallback: return empty menu structure\n        return getFallbackMenu();\n    }\n}\n\n/**\n * Get fallback menu structure when external JSON fails\n * @returns {Object} Empty menu structure\n */\nfunction getFallbackMenu() {\n    return {\n        version: '0.0',\n        combos: [],\n        sanduiches: [],\n        kikao: [],\n        bebidas: [],\n        porcoes: [],\n        pratos: [],\n        sobremesas: []\n    };\n}\n\n/**\n * Get all items from all categories as a flat array\n * @param {Object} menuData - Menu data object\n * @returns {Array} All menu items\n */\nexport function getAllItems(menuData) {\n    const categories = ['combos', 'sanduiches', 'kikao', 'bebidas', 'porcoes', 'pratos', 'sobremesas'];\n    return categories.flatMap(cat => menuData[cat] || []);\n}\n\n/**\n * Find an item by ID across all categories\n * @param {Object} menuData - Menu data object\n * @param {string} itemId - Item ID to find\n * @returns {Object|null} Item object or null if not found\n */\nexport function findItemById(menuData, itemId) {\n    const allItems = getAllItems(menuData);\n    return allItems.find(item => item.id === itemId) || null;\n}\n\n/**\n * Clear cached menu data (useful for testing or updates)\n */\nexport function clearMenuCache() {\n    cachedMenuData = null;\n}\n"],"names":["cachedMenuData","loadMenuData","url","base","response","data","error","getFallbackMenu","getAllItems","menuData","cat","findItemById","itemId","item"],"mappings":"icAQA,IAAIA,EAAiB,KAMd,eAAeC,GAAe,CAEjC,GAAI,OAAO,OAAW,KAAeD,EACjC,OAAOA,EAGX,GAAI,CAEA,MAAME,EAAM,GAAGC,CAAI,kBAEbC,EAAW,MAAM,MAAMF,EAAK,CAC9B,QAAS,CACL,eAAgB,kBAChC,CACA,CAAS,EAED,GAAI,CAACE,EAAS,GACV,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAG5D,MAAMC,EAAO,MAAMD,EAAS,KAAI,EAGhC,GAAI,CAACC,GAAQ,OAAOA,GAAS,SACzB,MAAM,IAAI,MAAM,6BAA6B,EAIjD,OAAI,OAAO,OAAW,MAClBL,EAAiBK,GAGdA,CACX,OAASC,EAAO,CACZ,eAAQ,MAAM,2BAA4BA,CAAK,EAGxCC,EAAe,CAC1B,CACJ,CAMA,SAASA,GAAkB,CACvB,MAAO,CACH,QAAS,MACT,OAAQ,CAAA,EACR,WAAY,CAAA,EACZ,MAAO,CAAA,EACP,QAAS,CAAA,EACT,QAAS,CAAA,EACT,OAAQ,CAAA,EACR,WAAY,CAAA,CACpB,CACA,CAOO,SAASC,EAAYC,EAAU,CAElC,MADmB,CAAC,SAAU,aAAc,QAAS,UAAW,UAAW,SAAU,YAAY,EAC/E,QAAQC,GAAOD,EAASC,CAAG,GAAK,EAAE,CACxD,CAQO,SAASC,EAAaF,EAAUG,EAAQ,CAE3C,OADiBJ,EAAYC,CAAQ,EACrB,KAAKI,GAAQA,EAAK,KAAOD,CAAM,GAAK,IACxD"}